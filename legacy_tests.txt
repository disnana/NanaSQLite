============================= test session starts =============================
platform win32 -- Python 3.11.9, pytest-8.4.2, pluggy-1.5.0 -- C:\Program Files\Python311\python.exe
cachedir: .pytest_cache
benchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: D:\data-backup\code\コード保存\NanaSQLite
configfile: pyproject.toml
plugins: langsmith-0.4.38, asyncio-0.26.0, benchmark-5.1.0, socket-0.7.0, typeguard-4.4.4, anyio-4.9.0
asyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 164 items

tests/test_nanasqlite.py::TestBasicOperations::test_set_and_get_string PASSED [  0%]
tests/test_nanasqlite.py::TestBasicOperations::test_set_and_get_integer PASSED [  1%]
tests/test_nanasqlite.py::TestBasicOperations::test_set_and_get_float PASSED [  1%]
tests/test_nanasqlite.py::TestBasicOperations::test_set_and_get_boolean PASSED [  2%]
tests/test_nanasqlite.py::TestBasicOperations::test_set_and_get_none PASSED [  3%]
tests/test_nanasqlite.py::TestBasicOperations::test_set_and_get_list PASSED [  3%]
tests/test_nanasqlite.py::TestBasicOperations::test_set_and_get_dict PASSED [  4%]
tests/test_nanasqlite.py::TestBasicOperations::test_contains PASSED      [  4%]
tests/test_nanasqlite.py::TestBasicOperations::test_len PASSED           [  5%]
tests/test_nanasqlite.py::TestBasicOperations::test_delete PASSED        [  6%]
tests/test_nanasqlite.py::TestBasicOperations::test_delete_nonexistent_raises_keyerror PASSED [  6%]
tests/test_nanasqlite.py::TestBasicOperations::test_get_nonexistent_raises_keyerror PASSED [  7%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[1] PASSED [  7%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[2] PASSED [  8%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[3] PASSED [  9%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[4] PASSED [  9%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[5] PASSED [ 10%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[6] PASSED [ 10%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[7] PASSED [ 11%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[8] PASSED [ 12%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[9] PASSED [ 12%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[10] PASSED [ 13%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[11] PASSED [ 14%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[12] PASSED [ 14%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[13] PASSED [ 15%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[14] PASSED [ 15%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[15] PASSED [ 16%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[16] PASSED [ 17%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[17] PASSED [ 17%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[18] PASSED [ 18%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[19] PASSED [ 18%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[20] PASSED [ 19%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[21] PASSED [ 20%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[22] PASSED [ 20%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[23] PASSED [ 21%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[24] PASSED [ 21%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[25] PASSED [ 22%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[26] PASSED [ 23%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[27] PASSED [ 23%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[28] PASSED [ 24%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[29] PASSED [ 25%]
tests/test_nanasqlite.py::TestNestedStructures::test_nested_dict_depth[30] PASSED [ 25%]
tests/test_nanasqlite.py::TestNestedStructures::test_deeply_nested_list PASSED [ 26%]
tests/test_nanasqlite.py::TestNestedStructures::test_mixed_nested_structure PASSED [ 26%]
tests/test_nanasqlite.py::TestPersistence::test_persistence_after_close PASSED [ 27%]
tests/test_nanasqlite.py::TestPersistence::test_persistence_multiple_keys PASSED [ 28%]
tests/test_nanasqlite.py::TestPersistence::test_persistence_with_updates PASSED [ 28%]
tests/test_nanasqlite.py::TestCacheBehavior::test_lazy_load_behavior PASSED [ 29%]
tests/test_nanasqlite.py::TestCacheBehavior::test_bulk_load_behavior PASSED [ 29%]
tests/test_nanasqlite.py::TestCacheBehavior::test_refresh_single_key PASSED [ 30%]
tests/test_nanasqlite.py::TestCacheBehavior::test_refresh_all PASSED     [ 31%]
tests/test_nanasqlite.py::TestCacheBehavior::test_get_fresh_after_direct_update PASSED [ 31%]
tests/test_nanasqlite.py::TestCacheBehavior::test_get_fresh_nonexistent_key PASSED [ 32%]
tests/test_nanasqlite.py::TestCacheBehavior::test_get_fresh_after_delete PASSED [ 32%]
tests/test_nanasqlite.py::TestDictMethods::test_keys PASSED              [ 33%]
tests/test_nanasqlite.py::TestDictMethods::test_values PASSED            [ 34%]
tests/test_nanasqlite.py::TestDictMethods::test_items PASSED             [ 34%]
tests/test_nanasqlite.py::TestDictMethods::test_get_with_default PASSED  [ 35%]
tests/test_nanasqlite.py::TestDictMethods::test_pop PASSED               [ 35%]
tests/test_nanasqlite.py::TestDictMethods::test_pop_with_default PASSED  [ 36%]
tests/test_nanasqlite.py::TestDictMethods::test_pop_nonexistent_raises_keyerror PASSED [ 37%]
tests/test_nanasqlite.py::TestDictMethods::test_update_from_dict PASSED  [ 37%]
tests/test_nanasqlite.py::TestDictMethods::test_update_from_kwargs PASSED [ 38%]
tests/test_nanasqlite.py::TestDictMethods::test_setdefault PASSED        [ 39%]
tests/test_nanasqlite.py::TestDictMethods::test_clear PASSED             [ 39%]
tests/test_nanasqlite.py::TestDictMethods::test_to_dict PASSED           [ 40%]
tests/test_nanasqlite.py::TestStandardCompatibility::test_popitem PASSED [ 40%]
tests/test_nanasqlite.py::TestStandardCompatibility::test_copy PASSED    [ 41%]
tests/test_nanasqlite.py::TestStandardCompatibility::test_equality FAILED [ 42%]
tests/test_nanasqlite.py::TestBatchOperations::test_batch_update PASSED  [ 42%]
tests/test_nanasqlite.py::TestBatchOperations::test_batch_delete PASSED  [ 43%]
tests/test_nanasqlite.py::TestBatchOperations::test_batch_get PASSED     [ 43%]
tests/test_nanasqlite.py::TestPerformance::test_bulk_vs_lazy_load_performance PASSED [ 44%]
tests/test_nanasqlite.py::TestEdgeCases::test_empty_string_key PASSED    [ 45%]
tests/test_nanasqlite.py::TestEdgeCases::test_unicode_key_and_value PASSED [ 45%]
tests/test_nanasqlite.py::TestEdgeCases::test_special_characters_in_key PASSED [ 46%]
tests/test_nanasqlite.py::TestEdgeCases::test_large_value PASSED         [ 46%]
tests/test_nanasqlite.py::TestEdgeCases::test_context_manager PASSED     [ 47%]
tests/test_async.py::TestAsyncBasicOperations::test_async_set_and_get_string PASSED [ 48%]
tests/test_async.py::TestAsyncBasicOperations::test_async_set_and_get_integer PASSED [ 48%]
tests/test_async.py::TestAsyncBasicOperations::test_async_set_and_get_dict PASSED [ 49%]
tests/test_async.py::TestAsyncBasicOperations::test_async_set_and_get_list PASSED [ 50%]
tests/test_async.py::TestAsyncBasicOperations::test_async_get_with_default PASSED [ 50%]
tests/test_async.py::TestAsyncBasicOperations::test_async_contains PASSED [ 51%]
tests/test_async.py::TestAsyncBasicOperations::test_async_delete PASSED  [ 51%]
tests/test_async.py::TestAsyncBasicOperations::test_async_len PASSED     [ 52%]
tests/test_async.py::TestAsyncDictMethods::test_async_keys PASSED        [ 53%]
tests/test_async.py::TestAsyncDictMethods::test_async_values PASSED      [ 53%]
tests/test_async.py::TestAsyncDictMethods::test_async_items PASSED       [ 54%]
tests/test_async.py::TestAsyncDictMethods::test_async_pop PASSED         [ 54%]
tests/test_async.py::TestAsyncDictMethods::test_async_pop_with_default PASSED [ 55%]
tests/test_async.py::TestAsyncDictMethods::test_async_update PASSED      [ 56%]
tests/test_async.py::TestAsyncDictMethods::test_async_update_kwargs PASSED [ 56%]
tests/test_async.py::TestAsyncDictMethods::test_async_clear PASSED       [ 57%]
tests/test_async.py::TestAsyncDictMethods::test_async_setdefault PASSED  [ 57%]
tests/test_async.py::TestAsyncSpecialMethods::test_async_load_all PASSED [ 58%]
tests/test_async.py::TestAsyncSpecialMethods::test_async_refresh PASSED  [ 59%]
tests/test_async.py::TestAsyncSpecialMethods::test_async_batch_update PASSED [ 59%]
tests/test_async.py::TestAsyncSpecialMethods::test_async_batch_delete PASSED [ 60%]
tests/test_async.py::TestAsyncSpecialMethods::test_async_batch_get PASSED [ 60%]
tests/test_async.py::TestAsyncSpecialMethods::test_async_to_dict PASSED  [ 61%]
tests/test_async.py::TestAsyncSpecialMethods::test_async_copy PASSED     [ 62%]
tests/test_async.py::TestAsyncSpecialMethods::test_async_get_fresh PASSED [ 62%]
tests/test_async.py::TestAsyncSQLExecution::test_async_execute PASSED    [ 63%]
tests/test_async.py::TestAsyncSQLExecution::test_async_fetch_one PASSED  [ 64%]
tests/test_async.py::TestAsyncSQLExecution::test_async_fetch_all PASSED  [ 64%]
tests/test_async.py::TestAsyncSQLiteWrappers::test_async_create_table PASSED [ 65%]
tests/test_async.py::TestAsyncSQLiteWrappers::test_async_create_index PASSED [ 65%]
tests/test_async.py::TestAsyncSQLiteWrappers::test_async_query PASSED    [ 66%]
tests/test_async.py::TestAsyncSQLiteWrappers::test_async_list_tables PASSED [ 67%]
tests/test_async.py::TestAsyncSQLiteWrappers::test_async_drop_table PASSED [ 67%]
tests/test_async.py::TestAsyncSQLiteWrappers::test_async_sql_insert PASSED [ 68%]
tests/test_async.py::TestAsyncSQLiteWrappers::test_async_sql_update PASSED [ 68%]
tests/test_async.py::TestAsyncSQLiteWrappers::test_async_sql_delete PASSED [ 69%]
tests/test_async.py::TestAsyncSQLiteWrappers::test_async_vacuum PASSED   [ 70%]
tests/test_async.py::TestAsyncConcurrency::test_concurrent_reads PASSED  [ 70%]
tests/test_async.py::TestAsyncConcurrency::test_concurrent_writes PASSED [ 71%]
tests/test_async.py::TestAsyncConcurrency::test_concurrent_mixed_operations PASSED [ 71%]
tests/test_async.py::TestAsyncContextManager::test_async_context_manager PASSED [ 72%]
tests/test_async.py::TestAsyncPydanticSupport::test_async_pydantic_model PASSED [ 73%]
tests/test_async.py::TestAsyncPerformance::test_large_batch_update PASSED [ 73%]
tests/test_async.py::TestAsyncPerformance::test_large_batch_delete PASSED [ 74%]
tests/test_async.py::TestAsyncErrorHandling::test_async_key_error PASSED [ 75%]
tests/test_async.py::TestAsyncErrorHandling::test_async_get_nonexistent PASSED [ 75%]
tests/test_async.py::TestAsyncDataTypes::test_async_set_and_get_float PASSED [ 76%]
tests/test_async.py::TestAsyncDataTypes::test_async_set_and_get_boolean PASSED [ 76%]
tests/test_async.py::TestAsyncDataTypes::test_async_set_and_get_none PASSED [ 77%]
tests/test_async.py::TestAsyncNestedStructures::test_async_nested_dict_depth[1] PASSED [ 78%]
tests/test_async.py::TestAsyncNestedStructures::test_async_nested_dict_depth[2] PASSED [ 78%]
tests/test_async.py::TestAsyncNestedStructures::test_async_nested_dict_depth[3] PASSED [ 79%]
tests/test_async.py::TestAsyncNestedStructures::test_async_nested_dict_depth[4] PASSED [ 79%]
tests/test_async.py::TestAsyncNestedStructures::test_async_nested_dict_depth[5] PASSED [ 80%]
tests/test_async.py::TestAsyncNestedStructures::test_async_nested_dict_depth[6] PASSED [ 81%]
tests/test_async.py::TestAsyncNestedStructures::test_async_nested_dict_depth[7] PASSED [ 81%]
tests/test_async.py::TestAsyncNestedStructures::test_async_nested_dict_depth[8] PASSED [ 82%]
tests/test_async.py::TestAsyncNestedStructures::test_async_nested_dict_depth[9] PASSED [ 82%]
tests/test_async.py::TestAsyncNestedStructures::test_async_nested_dict_depth[10] PASSED [ 83%]
tests/test_async.py::TestAsyncNestedStructures::test_async_deeply_nested_list PASSED [ 84%]
tests/test_async.py::TestAsyncNestedStructures::test_async_mixed_nested_structure PASSED [ 84%]
tests/test_async.py::TestAsyncPersistence::test_async_persistence_after_close PASSED [ 85%]
tests/test_async.py::TestAsyncPersistence::test_async_persistence_multiple_keys PASSED [ 85%]
tests/test_async.py::TestAsyncPersistence::test_async_persistence_with_updates PASSED [ 86%]
tests/test_async.py::TestAsyncSchemaManagement::test_async_drop_index PASSED [ 87%]
tests/test_async.py::TestAsyncSchemaManagement::test_async_alter_table_add_column PASSED [ 87%]
tests/test_async.py::TestAsyncSchemaManagement::test_async_get_table_schema PASSED [ 88%]
tests/test_async.py::TestAsyncSchemaManagement::test_async_list_indexes PASSED [ 89%]
tests/test_async.py::TestAsyncDataOperations::test_async_upsert PASSED   [ 89%]
tests/test_async.py::TestAsyncDataOperations::test_async_count PASSED    [ 90%]
tests/test_async.py::TestAsyncDataOperations::test_async_exists PASSED   [ 90%]
tests/test_async.py::TestAsyncDataOperations::test_async_execute_many PASSED [ 91%]
tests/test_async.py::TestAsyncQueryExtensions::test_async_query_with_limit PASSED [ 92%]
tests/test_async.py::TestAsyncQueryExtensions::test_async_query_with_order_and_limit PASSED [ 92%]
tests/test_async.py::TestAsyncUtilities::test_async_get_db_size PASSED   [ 93%]
tests/test_async.py::TestAsyncUtilities::test_async_export_table_to_dict PASSED [ 93%]
tests/test_async.py::TestAsyncUtilities::test_async_import_from_dict_list PASSED [ 94%]
tests/test_async.py::TestAsyncUtilities::test_async_get_last_insert_rowid PASSED [ 95%]
tests/test_async.py::TestAsyncUtilities::test_async_pragma PASSED        [ 95%]
tests/test_async.py::TestAsyncEdgeCases::test_async_empty_string_key PASSED [ 96%]
tests/test_async.py::TestAsyncEdgeCases::test_async_unicode_key_and_value PASSED [ 96%]
tests/test_async.py::TestAsyncEdgeCases::test_async_special_characters_in_key PASSED [ 97%]
tests/test_async.py::TestAsyncEdgeCases::test_async_large_value PASSED   [ 98%]
tests/test_async.py::TestAsyncPydanticDetailed::test_async_pydantic_nested_model PASSED [ 98%]
tests/test_async.py::TestAsyncPydanticDetailed::test_async_pydantic_optional_fields PASSED [ 99%]
tests/test_async.py::TestAsyncPydanticDetailed::test_async_pydantic_persistence PASSED [100%]

================================== FAILURES ===================================
___________________ TestStandardCompatibility.test_equality ___________________
tests\test_nanasqlite.py:636: in test_equality
    assert db == {"a": 1}
E   AssertionError: assert NanaSQLite('C...ta', cached=1) == {'a': 1}
E     
E     Full diff:
E     + NanaSQLite('C:\\Users\\msi-z\\AppData\\Local\\Temp\\tmp_v0hx59r\\test.db', table='data', cached=1)
E     - {
E     -     'a': 1,
E     - }
=========================== short test summary info ===========================
FAILED tests/test_nanasqlite.py::TestStandardCompatibility::test_equality - A...
======================== 1 failed, 163 passed in 2.54s ========================
