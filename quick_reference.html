<!DOCTYPE html>
<html lang="ja-JP" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>クイックリファレンス | NanaSQLite</title>
    <meta name="description" content="Ultra-fast SQLite dict wrapper for Python">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/assets/style.DVZwUbAc.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.B2Ngy00f.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.DBJAuMXi.js">
    <link rel="modulepreload" href="/assets/chunks/framework.C1dBqGw7.js">
    <link rel="modulepreload" href="/assets/quick_reference.md.CYLZ0D3k.lean.js">
    <link rel="icon" href="/logo.svg">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-fcbfc0e0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-fcbfc0e0>Skip to content</a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar" data-v-7ad780c2 data-v-9fd4d1dd><div class="wrapper" data-v-9fd4d1dd><div class="container" data-v-9fd4d1dd><div class="title" data-v-9fd4d1dd><div class="VPNavBarTitle has-sidebar" data-v-9fd4d1dd data-v-9f43907a><a class="title" href="/" data-v-9f43907a><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.svg" alt data-v-ab19afbb><!--]--><span data-v-9f43907a>NanaSQLite</span><!--[--><!--]--></a></div></div><div class="content" data-v-9fd4d1dd><div class="content-body" data-v-9fd4d1dd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9fd4d1dd><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9fd4d1dd data-v-afb2845e><span id="main-nav-aria-label" class="visually-hidden" data-v-afb2845e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>ホーム</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guide.html" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>ガイド</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/api_sync.html" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>APIリファレンス</span><!--]--></a><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-9fd4d1dd data-v-acee064b data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-bfe7971f><span class="text" data-v-bfe7971f><span class="vpi-languages option-icon" data-v-bfe7971f></span><!----><span class="vpi-chevron-down text-icon" data-v-bfe7971f></span></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><!----><!--[--><!--[--><div class="items" data-v-acee064b><p class="title" data-v-acee064b>日本語</p><!--[--><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/en/quick_reference.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>English</span><!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-9fd4d1dd data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9fd4d1dd data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/disnana/NanaSQLite" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9fd4d1dd data-v-f953d92f data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-bfe7971f><span class="vpi-more-horizontal icon" data-v-bfe7971f></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><!----><!--[--><!--[--><div class="group translations" data-v-f953d92f><p class="trans-title" data-v-f953d92f>日本語</p><!--[--><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/en/quick_reference.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>English</span><!--]--></a></div><!--]--></div><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/disnana/NanaSQLite" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9fd4d1dd data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-9fd4d1dd><div class="divider-line" data-v-9fd4d1dd></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2488c25a><span class="vpi-align-left menu-icon" data-v-2488c25a></span><span class="menu-text" data-v-2488c25a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-6b867909><button data-v-6b867909>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-d8b57b2d data-v-42c4c606><div class="curtain" data-v-42c4c606></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-42c4c606><span class="visually-hidden" id="sidebar-aria-label" data-v-42c4c606> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>ガイド</h2><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/guide.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>導入ガイド</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/async_guide.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>非同期サポート</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/transaction_guide.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>トランザクション</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/error_handling.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>エラーハンドリング</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/performance_tuning.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>性能・最適化</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/best_practices.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>ベストプラクティス</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 has-active" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>APIリファレンス</h2><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/api_sync.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>NanaSQLite (同期)</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/api_async.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>AsyncNanaSQLite (非同期)</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/quick_reference.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>クイックリファレンス</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-sidebar has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>On this page</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _quick_reference" data-v-e6f2a212><div><h1 id="クイックリファレンス" tabindex="-1">クイックリファレンス <a class="header-anchor" href="#クイックリファレンス" aria-label="Permalink to &quot;クイックリファレンス&quot;">​</a></h1><p>NanaSQLiteの主要な機能を素早く確認するためのチートシートです。</p><hr><h2 id="クラス-nanasqlite" tabindex="-1">クラス: NanaSQLite <a class="header-anchor" href="#クラス-nanasqlite" aria-label="Permalink to &quot;クラス: NanaSQLite&quot;">​</a></h2><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NanaSQLite</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">db_path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bulk_load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">bool</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                 optimize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">bool</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cache_size_mb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                 strict_sql_validation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">bool</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                 allowed_sql_functions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: list[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> None</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                 forbidden_sql_functions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: list[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> None</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                 max_clause_length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> None</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>SQLiteの永続化をdict形式のインターフェースで提供するラッパークラス。</p><h3 id="コンストラクタ引数" tabindex="-1">コンストラクタ引数 <a class="header-anchor" href="#コンストラクタ引数" aria-label="Permalink to &quot;コンストラクタ引数&quot;">​</a></h3><table tabindex="0"><thead><tr><th>引数</th><th>型</th><th>デフォルト</th><th>説明</th></tr></thead><tbody><tr><td><code>db_path</code></td><td><code>str</code></td><td><em>必須</em></td><td>SQLite データベースファイルへのパス</td></tr><tr><td><code>table</code></td><td><code>str</code></td><td><code>&quot;data&quot;</code></td><td>ストレージに使用するテーブル名</td></tr><tr><td><code>bulk_load</code></td><td><code>bool</code></td><td><code>False</code></td><td>初期化時に全データをメモリにロード</td></tr><tr><td><code>optimize</code></td><td><code>bool</code></td><td><code>True</code></td><td>パフォーマンス最適化を適用</td></tr><tr><td><code>cache_size_mb</code></td><td><code>int</code></td><td><code>64</code></td><td>SQLiteのキャッシュサイズ (MB)</td></tr><tr><td><code>strict_sql_validation</code></td><td><code>bool</code></td><td><code>True</code></td><td>厳格なSQLバリデーションを有効にする (v1.2.0+)</td></tr><tr><td><code>allowed_sql_functions</code></td><td><code>list</code></td><td><code>None</code></td><td>許可するSQL関数のリスト</td></tr><tr><td><code>forbidden_sql_functions</code></td><td><code>list</code></td><td><code>None</code></td><td>禁止するSQL関数のリスト</td></tr><tr><td><code>max_clause_length</code></td><td><code>int</code></td><td><code>1000</code></td><td>WHERE句などの最大文字数制限</td></tr></tbody></table><h3 id="使用例" tabindex="-1">使用例 <a class="header-anchor" href="#使用例" aria-label="Permalink to &quot;使用例&quot;">​</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 基本的な使用方法</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NanaSQLite(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mydata.db&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 一括ロードを有効化</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NanaSQLite(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mydata.db&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">bulk_load</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># カスタムテーブル名の指定</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NanaSQLite(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;app.db&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># キャッシュサイズの変更</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NanaSQLite(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mydata.db&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">cache_size_mb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><hr><h2 id="dictインターフェース" tabindex="-1">Dictインターフェース <a class="header-anchor" href="#dictインターフェース" aria-label="Permalink to &quot;Dictインターフェース&quot;">​</a></h2><h3 id="getitem-key-str-any" tabindex="-1"><code>__getitem__(key: str) -&gt; Any</code> <a class="header-anchor" href="#getitem-key-str-any" aria-label="Permalink to &quot;`__getitem__(key: str) -&gt; Any`&quot;">​</a></h3><p>キーで値を取得します。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><p><strong>例外:</strong> キーが存在しない場合は <code>KeyError</code>。</p><hr><h3 id="setitem-key-str-value-any-none" tabindex="-1"><code>__setitem__(key: str, value: Any) -&gt; None</code> <a class="header-anchor" href="#setitem-key-str-value-any-none" aria-label="Permalink to &quot;`__setitem__(key: str, value: Any) -&gt; None`&quot;">​</a></h3><p>キーで値を設定します。SQLiteに即座に永続化されます。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;value&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>サポート型:</strong> <code>str</code>, <code>int</code>, <code>float</code>, <code>bool</code>, <code>None</code>, <code>list</code>, <code>dict</code></p><hr><h3 id="delitem-key-str-none" tabindex="-1"><code>__delitem__(key: str) -&gt; None</code> <a class="header-anchor" href="#delitem-key-str-none" aria-label="Permalink to &quot;`__delitem__(key: str) -&gt; None`&quot;">​</a></h3><p>キーを削除します。SQLiteから即座に削除されます。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">del</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><p><strong>例外:</strong> キーが存在しない場合は <code>KeyError</code>。</p><hr><h3 id="contains-key-str-bool" tabindex="-1"><code>__contains__(key: str) -&gt; bool</code> <a class="header-anchor" href="#contains-key-str-bool" aria-label="Permalink to &quot;`__contains__(key: str) -&gt; bool`&quot;">​</a></h3><p>キーの存在を確認します。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;key&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;存在します！&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><hr><h3 id="len-int" tabindex="-1"><code>__len__() -&gt; int</code> <a class="header-anchor" href="#len-int" aria-label="Permalink to &quot;`__len__() -&gt; int`&quot;">​</a></h3><p>キーの総数を取得します。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(db)</span></span></code></pre></div><hr><h3 id="iter-iterator-str" tabindex="-1"><code>__iter__() -&gt; Iterator[str]</code> <a class="header-anchor" href="#iter-iterator-str" aria-label="Permalink to &quot;`__iter__() -&gt; Iterator[str]`&quot;">​</a></h3><p>キーを反復処理します。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(key)</span></span></code></pre></div><hr><h2 id="dictメソッド" tabindex="-1">Dictメソッド <a class="header-anchor" href="#dictメソッド" aria-label="Permalink to &quot;Dictメソッド&quot;">​</a></h2><h3 id="keys-list-str" tabindex="-1"><code>keys() -&gt; list[str]</code> <a class="header-anchor" href="#keys-list-str" aria-label="Permalink to &quot;`keys() -&gt; list[str]`&quot;">​</a></h3><p>すべてのキーを取得します。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">all_keys </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db.keys()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># [&#39;key1&#39;, &#39;key2&#39;, &#39;key3&#39;]</span></span></code></pre></div><hr><h3 id="values-list-any" tabindex="-1"><code>values() -&gt; list[Any]</code> <a class="header-anchor" href="#values-list-any" aria-label="Permalink to &quot;`values() -&gt; list[Any]`&quot;">​</a></h3><p>すべての値を取得します。一括ロードがトリガーされます。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">all_values </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db.values()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># [value1, value2, value3]</span></span></code></pre></div><hr><h3 id="items-list-tuple-str-any" tabindex="-1"><code>items() -&gt; list[tuple[str, Any]]</code> <a class="header-anchor" href="#items-list-tuple-str-any" aria-label="Permalink to &quot;`items() -&gt; list[tuple[str, Any]]`&quot;">​</a></h3><p>すべてのキーと値のペアを取得します。一括ロードがトリガーされます。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">all_items </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db.items()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># [(&#39;key1&#39;, value1), (&#39;key2&#39;, value2)]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 標準の dict に変換する場合</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(db.items())</span></span></code></pre></div><hr><h3 id="get-key-str-default-any-none-any" tabindex="-1"><code>get(key: str, default: Any = None) -&gt; Any</code> <a class="header-anchor" href="#get-key-str-default-any-none-any" aria-label="Permalink to &quot;`get(key: str, default: Any = None) -&gt; Any`&quot;">​</a></h3><p>デフォルト値付きで値を取得します。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 見つからない場合は None</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;default&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 見つからない場合は &quot;default&quot;</span></span></code></pre></div><hr><h3 id="pop-key-str-default-any" tabindex="-1"><code>pop(key: str, *default) -&gt; Any</code> <a class="header-anchor" href="#pop-key-str-default-any" aria-label="Permalink to &quot;`pop(key: str, *default) -&gt; Any`&quot;">​</a></h3><p>値を取得し、同時に削除します。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db.pop(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 見つからない場合は KeyError</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db.pop(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;default&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 見つからない場合は &quot;default&quot;</span></span></code></pre></div><hr><h3 id="update-mapping-dict-none-kwargs-none" tabindex="-1"><code>update(mapping: dict = None, **kwargs) -&gt; None</code> <a class="header-anchor" href="#update-mapping-dict-none-kwargs-none" aria-label="Permalink to &quot;`update(mapping: dict = None, **kwargs) -&gt; None`&quot;">​</a></h3><p>複数のキーを一度に更新します。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db.update({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;b&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db.update(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p><strong>注意:</strong> 大量更新には <code>batch_update()</code> を推奨します。</p><hr><h3 id="setdefault-key-str-default-any-none-any" tabindex="-1"><code>setdefault(key: str, default: Any = None) -&gt; Any</code> <a class="header-anchor" href="#setdefault-key-str-default-any-none-any" aria-label="Permalink to &quot;`setdefault(key: str, default: Any = None) -&gt; Any`&quot;">​</a></h3><p>値を取得します。キーが存在しない場合はデフォルト値を設定して返します。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db.setdefault(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;default&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><hr><h3 id="clear-none" tabindex="-1"><code>clear() -&gt; None</code> <a class="header-anchor" href="#clear-none" aria-label="Permalink to &quot;`clear() -&gt; None`&quot;">​</a></h3><p>すべてのキーを削除します。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db.clear()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">assert</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(db) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span></code></pre></div><hr><h2 id="特殊メソッド" tabindex="-1">特殊メソッド <a class="header-anchor" href="#特殊メソッド" aria-label="Permalink to &quot;特殊メソッド&quot;">​</a></h2><h3 id="load-all-none" tabindex="-1"><code>load_all() -&gt; None</code> <a class="header-anchor" href="#load-all-none" aria-label="Permalink to &quot;`load_all() -&gt; None`&quot;">​</a></h3><p>すべてのデータをSQLiteからメモリキャッシュへロードします。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db.load_all()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 以降の読み取りはすべてメモリから行われます</span></span></code></pre></div><hr><h3 id="refresh-key-str-none-none" tabindex="-1"><code>refresh(key: str = None) -&gt; None</code> <a class="header-anchor" href="#refresh-key-str-none-none" aria-label="Permalink to &quot;`refresh(key: str = None) -&gt; None`&quot;">​</a></h3><p>データベースの内容でキャッシュを更新します。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db.refresh(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 特定のキーを更新</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db.refresh()       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># キャッシュ全体をクリア（再読み込み待ち状態へ）</span></span></code></pre></div><hr><h3 id="is-cached-key-str-bool" tabindex="-1"><code>is_cached(key: str) -&gt; bool</code> <a class="header-anchor" href="#is-cached-key-str-bool" aria-label="Permalink to &quot;`is_cached(key: str) -&gt; bool`&quot;">​</a></h3><p>キーがメモリキャッシュに存在するか確認します。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db.is_cached(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ロード済みです！&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><hr><h3 id="to-dict-dict" tabindex="-1"><code>to_dict() -&gt; dict</code> <a class="header-anchor" href="#to-dict-dict" aria-label="Permalink to &quot;`to_dict() -&gt; dict`&quot;">​</a></h3><p>データベース全体の内容を標準の Python dict として返します。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db.to_dict()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># {&#39;key1&#39;: value1, &#39;key2&#39;: value2, ...}</span></span></code></pre></div><hr><h3 id="close-none" tabindex="-1"><code>close() -&gt; None</code> <a class="header-anchor" href="#close-none" aria-label="Permalink to &quot;`close() -&gt; None`&quot;">​</a></h3><p>データベース接続を閉じます。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db.close()</span></span></code></pre></div><p><strong>注意:</strong> <code>table()</code> メソッドで作成されたサブテーブルインスタンスは接続を共有しているため、最初に作成されたインスタンス（オーナー）のみが実際に接続を閉じます。</p><hr><h3 id="table-table-name-str-nanasqlite-v1-1-0" tabindex="-1"><code>table(table_name: str) -&gt; NanaSQLite</code> <em>(v1.1.0+)</em> <a class="header-anchor" href="#table-table-name-str-nanasqlite-v1-1-0" aria-label="Permalink to &quot;`table(table_name: str) -&gt; NanaSQLite` *(v1.1.0+)*&quot;">​</a></h3><p>サブテーブル用のインスタンスを取得します。接続とロックを共有します。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># メインインスタンスの作成</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NanaSQLite(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;app.db&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># サブテーブル用インスタンスの取得（接続を共有）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">users_db </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db.table(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config_db </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db.table(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;config&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 各テーブルに独立して保存</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">users_db[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;alice&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Alice&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;age&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config_db[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;theme&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;dark&quot;</span></span></code></pre></div><p><strong>引数:</strong></p><ul><li><code>table_name</code> (str): 取得するテーブル名</li></ul><p><strong>戻り値:</strong></p><ul><li><code>NanaSQLite</code>: 指定されたテーブルを操作する新しいインスタンス</li></ul><p><strong>メリット:</strong></p><ul><li><strong>スレッドセーフ</strong>: 複数のスレッドからの並行書き込みに対応</li><li><strong>メモリ効率</strong>: SQLiteの接続を再利用</li><li><strong>キャッシュの分離</strong>: テーブルごとに独立したメモリキャッシュを保持</li></ul><hr><h2 id="一括操作-batch-operations" tabindex="-1">一括操作 (Batch Operations) <a class="header-anchor" href="#一括操作-batch-operations" aria-label="Permalink to &quot;一括操作 (Batch Operations)&quot;">​</a></h2><h3 id="batch-update-mapping-dict-none" tabindex="-1"><code>batch_update(mapping: dict) -&gt; None</code> <a class="header-anchor" href="#batch-update-mapping-dict-none" aria-label="Permalink to &quot;`batch_update(mapping: dict) -&gt; None`&quot;">​</a></h3><p>トランザクション内で一括書き込みを行います。個別書き込みより10〜100倍高速です。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db.batch_update({</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;key1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;value1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;key2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;value2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;key3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;nested&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><hr><h3 id="batch-delete-keys-list-str-none" tabindex="-1"><code>batch_delete(keys: list[str]) -&gt; None</code> <a class="header-anchor" href="#batch-delete-keys-list-str-none" aria-label="Permalink to &quot;`batch_delete(keys: list[str]) -&gt; None`&quot;">​</a></h3><p>トランザクション内で一括削除を行います。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">db.batch_delete([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;key1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;key2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;key3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span></code></pre></div><hr><h2 id="コンテキストマネージャ" tabindex="-1">コンテキストマネージャ <a class="header-anchor" href="#コンテキストマネージャ" aria-label="Permalink to &quot;コンテキストマネージャ&quot;">​</a></h2><h3 id="enter-exit" tabindex="-1"><code>__enter__() / __exit__()</code> <a class="header-anchor" href="#enter-exit" aria-label="Permalink to &quot;`__enter__() / __exit__()`&quot;">​</a></h3><p><code>with</code> 文による自動的なクリーンアップをサポートします。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NanaSQLite(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mydata.db&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    db[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;value&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 自動的に close() が呼ばれます</span></span></code></pre></div><hr><h2 id="パフォーマンス" tabindex="-1">パフォーマンス <a class="header-anchor" href="#パフォーマンス" aria-label="Permalink to &quot;パフォーマンス&quot;">​</a></h2><h3 id="書き込み速度" tabindex="-1">書き込み速度 <a class="header-anchor" href="#書き込み速度" aria-label="Permalink to &quot;書き込み速度&quot;">​</a></h3><table tabindex="0"><thead><tr><th>メソッド</th><th>速度</th><th>用途</th></tr></thead><tbody><tr><td><code>db[key] = value</code></td><td>高速</td><td>単一書き込み</td></tr><tr><td><code>db.update({...})</code></td><td>高速</td><td>数個のキー</td></tr><tr><td><code>db.batch_update({...})</code></td><td><strong>最速</strong></td><td>大量書き込み (100個〜)</td></tr></tbody></table><h3 id="読み込み速度" tabindex="-1">読み込み速度 <a class="header-anchor" href="#読み込み速度" aria-label="Permalink to &quot;読み込み速度&quot;">​</a></h3><table tabindex="0"><thead><tr><th>モード</th><th>初期化時間</th><th>読み込み時間</th><th>メモリ</th></tr></thead><tbody><tr><td>遅延ロード (デフォルト)</td><td><strong>高速</strong></td><td>低速 (初回のみ)</td><td>低</td></tr><tr><td>一括ロード (Bulk)</td><td>低速</td><td><strong>高速</strong></td><td>高</td></tr></tbody></table><h3 id="推奨事項" tabindex="-1">推奨事項 <a class="header-anchor" href="#推奨事項" aria-label="Permalink to &quot;推奨事項&quot;">​</a></h3><ol><li>頻繁に多くのキーを読み込む場合は <code>bulk_load=True</code> を使用する</li><li>一括書き込みには <code>batch_update()</code> を使用する</li><li>最善のパフォーマンスのために <code>optimize=True</code> (デフォルト) を維持する</li><li>大規模なデータベースでは <code>cache_size_mb</code> を増やす</li></ol></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-1bcd8184><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link prev" href="/api_async.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Previous page</span><span class="title" data-v-1bcd8184>AsyncNanaSQLite (非同期)</span><!--]--></a></div><div class="pager" data-v-1bcd8184><!----></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api_async.md\":\"RNrpwPvJ\",\"api_sync.md\":\"2_0hsTJf\",\"async_guide.md\":\"C-hhfVeR\",\"best_practices.md\":\"Cemp5ZQZ\",\"en_api_async.md\":\"Dyux-PLa\",\"en_api_sync.md\":\"_HMniZba\",\"en_async_guide.md\":\"DANlO18i\",\"en_best_practices.md\":\"BjGof7cY\",\"en_error_handling.md\":\"C78IZwhj\",\"en_guide.md\":\"BvtE32l_\",\"en_index.md\":\"DmDX1OcH\",\"en_performance_tuning.md\":\"BAnfPW2Z\",\"en_quick_reference.md\":\"CR-JkSIa\",\"en_transaction_guide.md\":\"BG8vAZui\",\"error_handling.md\":\"cHhtNrWI\",\"guide.md\":\"BCjhr0TK\",\"index.md\":\"B4E0ej4U\",\"performance_tuning.md\":\"OnmLlt4T\",\"quick_reference.md\":\"CYLZ0D3k\",\"transaction_guide.md\":\"TVj9ju3i\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"NanaSQLite\",\"description\":\"Ultra-fast SQLite dict wrapper for Python\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/logo.svg\",\"nav\":[{\"text\":\"ホーム\",\"link\":\"/\"},{\"text\":\"ガイド\",\"link\":\"/guide\"},{\"text\":\"APIリファレンス\",\"link\":\"/api_sync\"}],\"sidebar\":[{\"text\":\"ガイド\",\"items\":[{\"text\":\"導入ガイド\",\"link\":\"/guide\"},{\"text\":\"非同期サポート\",\"link\":\"/async_guide\"},{\"text\":\"トランザクション\",\"link\":\"/transaction_guide\"},{\"text\":\"エラーハンドリング\",\"link\":\"/error_handling\"},{\"text\":\"性能・最適化\",\"link\":\"/performance_tuning\"},{\"text\":\"ベストプラクティス\",\"link\":\"/best_practices\"}]},{\"text\":\"APIリファレンス\",\"items\":[{\"text\":\"NanaSQLite (同期)\",\"link\":\"/api_sync\"},{\"text\":\"AsyncNanaSQLite (非同期)\",\"link\":\"/api_async\"},{\"text\":\"クイックリファレンス\",\"link\":\"/quick_reference\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/disnana/NanaSQLite\"}]},\"locales\":{\"root\":{\"label\":\"日本語\",\"lang\":\"ja-JP\"},\"en\":{\"label\":\"English\",\"lang\":\"en-US\",\"link\":\"/en/\",\"themeConfig\":{\"nav\":[{\"text\":\"Home\",\"link\":\"/en/\"},{\"text\":\"Guide\",\"link\":\"/en/guide\"},{\"text\":\"API Reference\",\"link\":\"/en/api_sync\"}],\"sidebar\":[{\"text\":\"Guide\",\"items\":[{\"text\":\"Getting Started\",\"link\":\"/en/guide\"},{\"text\":\"Async Support\",\"link\":\"/en/async_guide\"},{\"text\":\"Transactions\",\"link\":\"/en/transaction_guide\"},{\"text\":\"Error Handling\",\"link\":\"/en/error_handling\"},{\"text\":\"Performance\",\"link\":\"/en/performance_tuning\"},{\"text\":\"Best Practices\",\"link\":\"/en/best_practices\"}]},{\"text\":\"API Reference\",\"items\":[{\"text\":\"NanaSQLite (Sync)\",\"link\":\"/en/api_sync\"},{\"text\":\"AsyncNanaSQLite (Async)\",\"link\":\"/en/api_async\"},{\"text\":\"Quick Reference\",\"link\":\"/en/quick_reference\"}]}]}}},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>